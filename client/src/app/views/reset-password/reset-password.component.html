<div class="wrapper">
    <h2>{{ appName }}</h2>
    @if (status === 'pending') {
        <form [formGroup]="form" (ngSubmit)="onSubmit()" class="form">
        <h3>Réinitialisation du mot de passe</h3>
        <div class="form-row">
      <mat-form-field appearance="outline" class="half-width">
        <mat-label>Mot de passe</mat-label>
        <input matInput [type]="hidePassword ? 'password' : 'text'" formControlName="password" autocomplete="new-password">
        <button mat-icon-button matSuffix type="button" (click)="hidePassword = !hidePassword">
          <mat-icon>{{hidePassword ? 'visibility_off' : 'visibility'}}</mat-icon>
        </button>
        <mat-hint *ngIf="form.get('password')?.dirty && !passwordStrength" style="color:#c62828">
          Au moins 8 caractères, 1 majuscule, 1 minuscule, 1 chiffre, 1 caractère spécial.
        </mat-hint>
      </mat-form-field>
      <mat-form-field appearance="outline" class="half-width">
        <mat-label>Confirmez le mot de passe</mat-label>
        <input matInput [type]="hidePasswordConfirm ? 'password' : 'text'" formControlName="passwordConfirm" autocomplete="new-password">
        <button mat-icon-button matSuffix type="button" (click)="hidePasswordConfirm = !hidePasswordConfirm">
          <mat-icon>{{hidePasswordConfirm ? 'visibility_off' : 'visibility'}}</mat-icon>
        </button>
        <mat-error *ngIf="form.hasError('passwordMismatch') && form.get('passwordConfirm')?.touched">
          Les mots de passe ne correspondent pas.
        </mat-error>
      </mat-form-field>
    </div>
        <button class="app-btn blue-btn resetPasswordBtn" color="primary" type="submit" [disabled]="form.invalid || isLoading">
          Valider
          <p class="resetPasswordError">{{ resetPasswordError }}</p>
          <span class="smallLoader" *ngIf="isLoading"></span>
        </button>
    </form>
    } @else if (status === 'success') {
        <div class="passwordResetSuccess">
            <p>Votre mot de passe à bien été réinitialisé.</p>
            <p>Vous pouvez dès à présent vous connecter avec vos nouveaux identifiants.</p>

            <button class="app-btn blue-btn resetPasswordBtn" (click)="redirectLogin()">
                Connexion
            </button>
        </div>
    }
</div>